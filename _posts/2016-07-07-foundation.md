---
layout: post
title: Foundation Architecture an Overview
---

<p>The Foundation framework consists of five main components:
1. Feeders – Scripts or programs generating a data set sent to the Foundation listener. The protocol
is a simple XML stream.
2. Foundation Listener – A port or JMS Listener receiving the XML streams from various Feeders
and dispatching them to data normalizers, called Adapters.
3. Foundation Adapters – Adapters are programs within the Foundation framework that apply rules
and data normalization to incoming data. An Adapter calls into the Foundation Admin API for
inserting and updating objects. Each Adapter is application specific (Example NagiosEvent,
SNMP or Syslog) and is easily added and managed with the framework.
4. Foundation Persistence service – Relational Persistence layer which runs on the top of a
database or a database cluster.
5. Foundation API – Documented API's for Java, PHP and Perl, used to retrieve data from the data
store</p>
<p>Dataflow<br>
The data flow of messages is unidirectional, since the Foundation Framework doesn't reply to the
incoming XML streams. The data flow is as follows:
**FEEDER –-> Foundation Listener ---> Adapter ---> Admin API --->Data Store**
Component Details:
**Feeder**
In order to integrate data into the Foundation framework, the data generated by the source application
(for example: Nagios or JMX Service) need to be read and sent as an XML stream to one of the listeners.
This functionality is provided by Feeders. The Feeder can be written in any language. For example,
Nagios feeders are written in perl. The xml output protocol is simple:
<FeederName AttributeName='AttributeValue' AttributeName='AttributeValue' … />
The FeederName matches with the Adapter name, and the Attributes are just a list of name value pairs.
For example, the Nagios Event Feeder XML has the following format:
<NAGIOSLOG MonitorServer='localhost' Severity='HIGH' TextMessage='Failed to check
Host' />
The feeder could include the logic for normalizing the data, but this is discouraged. The best approach is
to have a simple and generic feeder that just reads and forwards the data to the listener. Normalization
functions are best performed by Adapters.
Foundation Listener
The listener is a simple service either listening on port 4913 or on a JMS topic. The incoming XML
message is analyzed and forwarded to the appropriate adapter as defined in the XML element, i.e. the
Adapter that matches “FeederName”.
Adapters
Adapters are data normalizers that apply normalization or simplification rules to the incoming XML
message. For example, an adapter could calculate the average temperature for a data feed of 10 sensors
in a server room, and just insert the calculated value into the data store.
An Adapter can be used for validating incoming data for completeness. It can and should be used to
reject incomplete or faulty data before it gets rejected by the persistence layer, which affects system
performance.
Adapters are written in Java and compiled into a jar library package. The package includes a Spring
assembly file which is read by the Foundation Framework at initialization time. See the tutorial at the end
of this document for more details about the syntax of the assembly file, and how to deploy an Adapter.</p>